---
title: '2019-05-30:let、const、var 的区别有哪些？'
date: 2019-05-30 17:06:58
tags: 面试
---

## 前言 
这是来自于参与刘小夕同学的GitHub项目的每日一题，[地址在此](https://github.com/YvetteLau/Step-By-Step/issues/16)，感兴趣的同学可以联系她哟～

今日的题目是“let、const、var 的区别有哪些？”， 以下是各种搜罗的答案。

## 分别是什么

### var
我现在已经养成看东西直接去MDN看的习惯，[var的文档在这里](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/var)。

变量声明，无论发生在何处，都在执行任何代码之前进行处理。用 var 声明的变量的作用域是它当前的执行上下文，它可以是嵌套的函数，也可以是声明在任何函数外的变量。如果你重新声明一个 JavaScript 变量，它将不会丢失其值。

将赋值给未声明变量的值在执行赋值时将其隐式地创建为全局变量（它将成为全局对象的属性）。声明和未声明变量之间的差异是：
1. 声明变量的作用域限制在其声明位置的上下文中，而非声明变量总是全局的
2. 声明变量在任何代码执行前创建，而非声明变量只有在执行赋值操作的时候才会被创建
3. 声明变量是在它所在上下文环境的不可配置属性，非声明变量是可配置的（如非声明变量可以被删除）
由于这三个差异，未能声明变量将很可能导致意想不到的结果。因此，建议始终声明变量，无论它们是在函数还是全局作用域内。 

#### 变量提升
由于变量声明（以及其他声明）总是在任意代码执行之前处理的，所以在代码中的任意位置声明变量总是等效于在代码开头声明。这意味着变量可以在声明之前使用，这个行为叫"hoisting"."hoisting"就像是把所有的变量声明移动到函数或者全局代码的开头位置。
类似于：
```
var bla;
bla = 2;
```
建议始终在做用用顶部声明变量（全局代码的顶部和函数代码的顶部），这可以清楚知道哪些变量是函数作用域（本地）， 哪些变量在作用域链上解决。
重要的是，提升将影响变量声明，而不会影响其值的初始化。当到达赋值语句时，该值被分配。

### let 
let允许你声明一个作用域被限制在块级中的变量、语句或者表达式。与var关键字不同的是，var声明的变量只能是全局或者整个函数块的。
使用let可以使代码更简单，在某些情景下能代替闭包来实现需求
在同一个函数或块作用域中重复声明同一个变量会引起SyntaxError。

#### 作用域规则
let声明的变量自在其声明的块或子块中可用，这一点，与var相似。二者之间最主要的区别在于var声明的变量的作用域是整个封闭函数。

```
function varTest() {
  var x = 1;
  if (true) {
    var x = 2;  // 同样的变量!
    console.log(x);  // 2
  }
  console.log(x);  // 2
}

function letTest() {
  let x = 1;
  if (true) {
    let x = 2;  // 不同的变量
    console.log(x);  // 2
  }
  console.log(x);  // 1
}
```

#### 暂存死区
let 被创建在包含该声明的（块）作用域顶部，一般被称为“提升”。与通过 var 声明的有初始化值 udefined 的变量不同， 通过let 声明的变知道它们的定义被执行时猜才初始化。在变量初始化之前访问该变量会导致 ReferenceError。该变量处在一个自块顶部到初始化处理的”暂存死区“中

```
function do_something() {
  console.log(bar); // undefined
  console.log(foo); // ReferenceError
  var bar = 1;
  let foo = 2;
}
```

#### let与var的区别
let的作用域是块，而var的作用域是函数

#### let块
let块提供了一种在块的范围内获取变量的值，而不会影响块外面名字相同的变量的值的方法。

```
var x = 5;
var y = 0;

let (x = x + 10, y = 12) {
  console.log(x + y); // 27
}

console.log(x + y); // 5
```

### const
const是块级作用域，很像使用let语句定义的变量。变量的值不能通过重新赋值来改变，并且不能重新声明。

此声明创建一个常量，其作用域可以是全局或本地声明的块。 与var变量不同，全局常量不会变为窗口对象的属性。需要一个常数的初始化器；也就是说，您必须在声明的同一语句中指定它的值（这是有道理的，因为以后不能更改）。

const声明创建一个值的只读引用。但这并不意味着它所持有的值是不可变的，只是变量标识符不能重新分配。例如，在引用内容是对象的情况下，这意味着可以改变对象的内容（例如，其参数）。

关于“暂存死区”的所有讨论都适用于let和const。



