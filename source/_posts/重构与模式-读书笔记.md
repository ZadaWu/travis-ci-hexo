---
title: 重构与模式-读书笔记
date: 2019-04-04 09:08:05
tags: 编程思维
---

## 有关重构与模式
模式与重构之间存在着天然联系。模式时你想到达的目的地，而重构则是从其他地方抵达这个目的地的条条道路。
将模式放到重构的背景中领会，而不是仅仅将模式视为与重构无关的可服用的要素。

### 重构的动机
1. 使新代码的增加更加容易
2. 改善既有代码的设计
3. 对代码理解更透彻
4. 提高编程趣味性

### 重构需要的工作方法测试驱动开发（TDD）和持续重构
这是极限编程诸多优秀实践中的两个。通过TDD和持续重构，我们将变成变成一种对话，从而高效的使可以工作的代码不断演进。测试驱动开发和持续重构提供了一种精益，迭代和训练有素的变成风格，能够最大程度地有张有驰，提高生产率。
1. 问： 编写一个测试，向系统提问
2. 答： 编写代码通过这个测试，回答这个提问
3. 提炼： 通过合并概念，去芜存菁，消除奇艺，提炼回答
4. 反复： 提出下一个问题，继续进行对话
而这样的行为有助于：
1. 保持较低的缺陷数量
2. 大胆地进行重构
3. 得到更简单，更优秀的代码
4. 编程时没有压力

###测试驱动的重构
测试驱动的重构（test-driven refactoring）包括应用测试驱动开发得到替换代码，然后将老代码替换为新代码（同时保留并重新运行老代码的测试）。
替换算法重构时最适合测试驱动重构方法哎实现重构的绝佳例子。它实际上时彻底地将原油算法替换成另一个更简单清晰的算法。如果去完成呢？先编写新算法=》替换老算法=》测试通过=>调试

### 低层次重构
低层次重构所需要完成的许多工作都设计代码的搬移
1. 提炼函数重构 需要将代码搬移到一个新函数中
2. 函数上移重构 需要将方法从子类搬移到超类
3. 提炼类重构 需要将代码搬移到心累中
4. 搬移函数重构 需要将函数从一个类搬移到另外一个类
5. 替换算法重构 需要将写新方法代替老方法
6. 


### 一些模版方法的意图
1. Template Method(模版方法)的意图
   定义一个操作中算法的骨架，而将一些步骤延迟到子类中。它使得之类在不改变算法结构的情况下，重定义该算法的某些特定步骤。而它的功能其实有助于减少或者去掉类层次中各个子类中相识方法中的重复代码。
2. State（状态）的意图
  允许一个对象在其内部状态改变时改变自己的行为。对象看起来似乎修改了自己的类。而它的功能其实有助于简化复杂的有条件的状态改变逻辑


